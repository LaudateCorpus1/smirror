{
  "Mirrors": {
    "BaseURL": "gs://${gsConfigBucket}/StorageMirror/dataflow/",
    "Rules": [
      {
        "Source": {
          "Prefix": "/data/",
          "Suffix": ".csv.gz"
        },
        "Dest": {
          "URL": "gs://destBucket/data",
          "Credentials": {
            "Parameter": "storagemirror.gcp",
            "Key": "smirror"
          }
        },
        "OnSuccess": [
          {
            "Action": "delete"
          }
        ],
        "OnFailure": [
          {
            "Action": "move",
            "URL": "s3://sourceBucket/data/errors/"
          }
        ],
        "Codec": "gzip",
        "PreserveDepth": 1
      },
      {
        "Source": {
          "Prefix": "/large/data/",
          "Suffix": ".csv.gz"
        },
        "Dest": {
          "URL": "gs://destBucket/data/chunks/",
          "Credentials": {
            "Parameter": "storagemirror.gcp",
            "Key": "smirror"
          }
        },
        "Split": {
          "MaxLines": 10000,
          "Template": "%s_%05d"
        },
        "OnSuccess": [
          {
            "Action": "delete"
          }
        ],
        "OnFailure": [
          {
            "Action": "move",
            "URL": "s3://sourceBucket/data/errors/"
          }
        ],
        "Codec": "gzip",
        "PreserveDepth": 1
      }
    ]
  }
}